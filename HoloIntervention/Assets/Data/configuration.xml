<?xml version="1.0" encoding="utf-8"?>
<HoloIntervention>
  <Tools IGTConnection="NDITracker">
    <Tool 
      Model="Tools/hemisphere_stylus"
      From="Tip"
      To="Reference"
      LerpEnabled="false" 
      />
  </Tools>

  <TouchingSphereTask
    IGTConnection="NDITracker"
    PhantomFrom="Phantom"
    PhantomTo="Reference"
    StylusFrom="StylusTip"
    >
    <Region
      XMinMeters="0.2"
      XMaxMeters="0.8"
      YMinMeters="0.2"
      YMaxMeters="0.8"
      ZMinMeters="0.2"
      ZMaxMeters="0.8"
    />
  </TouchingSphereTask>

  <RegisterModelTask
    IGTConnection="NDITracker"
    ModelName="LegoPhantom.stl"
    ModelFrom="Phantom"
    ModelTo="Reference"
    StylusFrom="StylusTip"
    />

  <CoordinateDefinitions>
  </CoordinateDefinitions>

  <CameraRegistration
    IGTConnection="NDITracker"
    Dp="2"
    MinDistanceDivisor="16"
    Param1="255"
    Param2="30"
    MinRadius="20"
    MaxRadius="60"
    />

  <ManualRegistration
    IGTConnection="NDITracker"
    From="Tool"
    To="Reference"
    />

  <OpticalRegistration
    IGTConnection="NDITracker"
    RecalcThresholdCount="100"
    From="HoloLens"
    To="Reference"
    />

  <ModelAlignmentRegistration
    IGTConnection="NDITracker"
    SphereFrom="Sphere"
    SphereTo="Reference"
    HoloLensFrom="HoloLens"
    HoloLensTo="Reference"
    NumberOfPointsToCollectPerEye="8"
    Primitive="Sphere"
    Colour="0.0 0.0 0.8 1.0"
    Argument="0.04 0.0 0.0"/> <!-- 40mm diameter in meters -->

  <IGTConnections>
    <Connection
      Name="NDITracker"
      Host="192.168.0.28"
      Port="18944" 
      />

    <xConnection
      Name="2DImage"
      Host="192.168.0.28"
      Port="18944"
      EmbeddedImageTransformName="ImageToReference" 
      />
    <xConnection
      Name="3DImage"
      Host="192.168.0.28"
      Port="18945"
      EmbeddedImageTransformName="VolumeToReference" 
      />
  </IGTConnections>

  <SliceRendering 
    From="Image" 
    To="HMD"
    WhiteMapColour="1.0 0.0 0.0 1.0"
    BlackMapColour="0.0 0.0 1.0 1.0"
    IGTConnection="2DImage" 
    />

  <VolumeRendering 
    From="Volume" 
    To="HMD"
    IGTConnection="3DImage" 
    />

</HoloIntervention>